
## Submodules


[Pro's use git submodules](https://github.com/commaai/openpilot/blob/master/.gitmodules)



```
git submodule add  <ssh-url>
```

All this does is add the `.gitmodules` file and update the git config.

[Add a specific branch as a submodule](https://stackoverflow.com/questions/1777854/how-can-i-specify-a-branch-tag-when-adding-a-git-submodule) if you want to do this, it is easiest to just edit the `.gitmodules` file to add the `branch = <>` keyword 

```
[submodule "blala"]
    path = blala
    url = git@github.com:seb/blala.git
    branch = dev
[submodule "nice"]
    path = nice
    url = git@github.com:seb/nice.git
    branch = main
```

[You can't add submodules as references to branches within the same repo](https://stackoverflow.com/questions/64810428/can-i-use-git-submodule-within-the-same-repository)


Update the git config file:

```
git submodule init
```

Update the submodules to the most recent remote commit:

```
git submodule update
```

[To remove](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-submodule) just run:

```
git rm <path-to-submodule>
```

and commit.
***

## GUIs

 - GitExtensions, launch from command line with `gitex`. Lets you configure literally everything, but it is a bit clunky.

- GitHub Desktop, Launch from command line with `github`. Cant configure bare repositories.

Use the VSCode built-in source control tab. Click on the git-graph extension. Can't configure the repo from here.
***
## Worktrees

Git Worktrees are ways to have multiple branches of a repo checked out at once in separate folder structures without having to clone the entire repo twice.

First make a 'bare' repo. This is basically just what would normally be in the `.git` file, but in the top level of the directory:

```
git clone --bare <path>
```

Then add a worktree by checking out the existing branch:

```
git fetch origin refs/heads/*:refs/heads/*'

git workree add <branch name> <branch name>
```
***

## GitHub CLI

Use the GitHub Command Line Interface to create and delete repositories

I installed 'GH CLI' via:

```
winget install GitHub.cli
```

Check which account you are logged in to with:

```
gh auth status
```

Login with:

```
gh auth login
```


Create a remote repo from an existing repository:

```
gh repo create <repo-name> --private --source=. --remote=upstream
```

Or create one interactively with the following to handle any situation:

```
gh repo create
```

If you are pushing for the first time and you're getting the error: `fatal: the requested upstream branch 'origin/master' does not exist`, you may need to use:

```
git push -u origin main
```

***

## Use PowerShell Aliases

I use a number of aliases in my [PowerShell Profile](../../../assets/pwsh.ps1):

```powershell
set-Alias -Name g -Value git
function gd { git diff $args }
function s { git status $args}
function l { & git log $args }
function rl { & git reflog $args }
function lo { git fetch; git branch --show-current | git log }
function rlo { git fetch; git branch --show-current| git reflog  }
Function c {git commit -am "$args"}
Function gcp {git commit -am "$args"; git push}
function a { git add $args }
function aa { ga -A}
function gb { git branch $args }
function gs { & git switch  $args }
Function pl {git pull $args}
Function p {git push $args}
function gt { & git log --graph --oneline --decorate $args }
function gr { & git remote -v $args}
function gf { git fetch }
function gd { git diff $args }
```
